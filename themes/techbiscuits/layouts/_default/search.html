{{ define "main" }}
<section class="search-page">
    <div class="content-container">
        <div class="search-header">
            <h1>Search Blog Posts</h1>
            <p class="search-description">Search through all blog posts by title, content, or tags</p>
        </div>

        <div class="search-container">
            <div class="search-bar">
                <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="11" cy="11" r="8"></circle>
                    <path d="m21 21-4.35-4.35"></path>
                </svg>
                <input
                    type="text"
                    id="search-input"
                    class="search-input"
                    placeholder="Search posts..."
                    autocomplete="off"
                    aria-label="Search blog posts"
                />
                <button id="clear-search" class="clear-button is-hidden" aria-label="Clear search">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>

            <div class="search-filters">
                <label class="filter-label">Filter by tags:</label>
                <div id="tag-filters" class="tag-filters">
                    <!-- Tags populated by JavaScript -->
                </div>
            </div>
        </div>

        <div class="search-stats" id="search-stats">
            <span id="results-count" aria-live="polite">Loading posts...</span>
        </div>

        <div id="search-results" class="search-results">
            <!-- Results populated by JavaScript -->
        </div>

        <div id="no-results" class="no-results is-hidden">
            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <circle cx="11" cy="11" r="8"></circle>
                <path d="m21 21-4.35-4.35"></path>
            </svg>
            <h3>No results found</h3>
            <p>Try adjusting your search terms or filters</p>
        </div>

        <div id="search-error" class="search-error is-hidden" role="alert">
            <p>We couldn't load the search index right now. Please try again later or browse all posts below.</p>
        </div>

        <noscript>
            <div class="search-noscript">
                <h3>Browse all posts</h3>
                <ul>
                    {{ range sort (where .Site.RegularPages "Section" "blog") "Date" "desc" }}
                    <li><a href="{{ .RelPermalink }}">{{ .Title }}</a></li>
                    {{ end }}
                </ul>
                <p>Enable JavaScript for full search and filtering.</p>
            </div>
        </noscript>
    </div>
</section>
{{ end }}

{{ define "page-scripts" }}
<script src="/js/search.js" defer></script>
{{ end }}
