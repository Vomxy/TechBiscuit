{{ define "main" }}
<section class="creative-gallery">
    <div class="content-container">
        <header class="gallery-header">
            <h1 class="gallery-title">Creative Works</h1>
            <p class="gallery-subtitle">A curated collection of poetry, art, and timeless wisdom</p>
        </header>

        <!-- Filter buttons -->
        <div class="creative-filters">
            <button class="filter-btn active" data-filter="all">All</button>
            <button class="filter-btn" data-filter="poetry">Poetry</button>
            <button class="filter-btn" data-filter="resilience">Resilience</button>
            <button class="filter-btn" data-filter="wisdom">Wisdom</button>
            <button class="filter-btn" data-filter="adventure">Adventure</button>
        </div>

        <!-- Creative works grid -->
        <div class="creative-grid">
            {{ range .Pages }}
            <article class="creative-card" data-category="{{ .Params.category }}" data-theme="{{ .Params.theme }}">
                <div class="card-inner">
                    <!-- Card front -->
                    <div class="card-front">
                        <div class="card-icon">
                            {{ if eq .Params.category "poetry" }}
                            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                <polyline points="14 2 14 8 20 8"></polyline>
                                <line x1="16" y1="13" x2="8" y2="13"></line>
                                <line x1="16" y1="17" x2="8" y2="17"></line>
                                <polyline points="10 9 9 9 8 9"></polyline>
                            </svg>
                            {{ end }}
                        </div>
                        <h2 class="card-title">{{ .Title }}</h2>
                        <p class="card-author">by {{ .Params.author }}</p>
                        <div class="card-meta">
                            <span class="card-theme">{{ .Params.theme }}</span>
                            <span class="card-year">{{ .Params.year }}</span>
                        </div>
                        <p class="card-description">{{ .Params.description }}</p>
                        <button class="read-more-btn" aria-label="Read {{ .Title }}">Read</button>
                    </div>

                    <!-- Card back -->
                    <div class="card-back">
                        <div class="poem-content">
                            {{ if .Params.lines }}
                            <div class="poem-lines">
                                {{ range .Params.lines }}
                                <p class="poem-line">{{ . }}</p>
                                {{ end }}
                            </div>
                            {{ else }}
                            {{ .Content }}
                            {{ end }}
                        </div>
                        <button class="close-btn" aria-label="Close">Ã—</button>
                    </div>
                </div>
            </article>
            {{ end }}
        </div>
    </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Filter functionality
    const filterButtons = document.querySelectorAll('.filter-btn');
    const creativeCards = document.querySelectorAll('.creative-card');

    filterButtons.forEach(button => {
        button.addEventListener('click', function() {
            const filterValue = this.getAttribute('data-filter');

            // Update active button
            filterButtons.forEach(btn => btn.classList.remove('active'));
            this.classList.add('active');

            // Filter cards
            creativeCards.forEach(card => {
                const cardCategory = card.getAttribute('data-category');
                const cardTheme = card.getAttribute('data-theme');

                if (filterValue === 'all' ||
                    cardCategory === filterValue ||
                    cardTheme === filterValue) {
                    card.style.display = 'block';
                    card.classList.add('fade-in');
                } else {
                    card.style.display = 'none';
                }
            });
        });
    });

    // Card flip functionality
    creativeCards.forEach(card => {
        const readButton = card.querySelector('.read-more-btn');
        const closeButton = card.querySelector('.close-btn');
        const cardInner = card.querySelector('.card-inner');

        if (readButton) {
            readButton.addEventListener('click', function(e) {
                e.preventDefault();
                cardInner.classList.add('flipped');
            });
        }

        if (closeButton) {
            closeButton.addEventListener('click', function(e) {
                e.preventDefault();
                cardInner.classList.remove('flipped');
            });
        }
    });
});
</script>
{{ end }}
